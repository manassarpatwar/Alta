<!DOCTYPE html>
<html>
<head>
  <title>test</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="css/admin_nav.css">
  <link rel="stylesheet" type="text/css" href="css/dashboard.css">
  <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="css/bootstrap-responsive.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="js/jquery.min.js"></script>
</head>
<body>
  <div id = "wrapper">
    <%= erb :admin_nav %>
    
    <div id = "page-content-wrapper">
      <nav>
        <h1 id = "alta">Alta</h1>
        <a href = "/dashboard/fetch_tweets"><input type="submit" name="button" value="Fetch tweets"></a>
      </nav>
      <div id = "requests">
        <div id = "incoming_tweets">
          <h2>Tweets</h2>
          <div class = "displaytweets">
            <table>
                <% unless @tweets.nil? %>
                  <% if @tweets.length == 0 %>
                    <h1>Please click fetch tweets to fetch the tweets</h1>
                  <% else %>
                    <% @tweets.reverse_each do |tweet| %>
                        <tr>
                          <td class = "tweets">
                            <h1><%= @tweets.index(tweet) %></h1>
                            <div>
                              <%=  TWITTER_CLIENT.oembed(tweet, hide_media: "true", hide_thread: "true").html%>
                              <div class = "reply">
                                <form method="post" action = "replyToTweet"> 
                                  Reply to Tweet: <input type="text" name="reply" value="<%=h params[:reply] %>"/>
                                  <% params[:tweetid] = tweet.id %>
                                  <% params[:screen_name] = tweet.user.screen_name %>
                                  <input type = "hidden" name = "tweetid" value = "<%=h params[:tweetid]%>" />
                                  <input type = "hidden" name = "screen_name" value = "<%=h params[:screen_name]%>" />
                                  <input type="submit" name="button" value="reply" />
                                </form>
                              </div>
                            </div>
                            <div class = "tweet_actions">
                              <img src = "img/check.png" class= "check" alt = "reply tweet" width = "50">
                              <form method="post" action = "delete_tweet"> 
                                <% params[:tweetindex] = @tweets.index(tweet) %>
                                <!-- <img src = "img/cross.png" class = "delete" alt = "delete tweet" width = "50"> -->
                                <input type = "hidden" name = "tweetindex" value = "<%=h params[:tweetindex]%>" />
                                <input type="image" src = "img/cross.png" name="button" value="delete" class = "delete" id = "delete_icon">
                              </form>
                            </div>
                          </td>
                        </tr>
                    <% end %>
                  <% end %>
               <% end %>
              </table>
          </div>
          <h2>Taxis</h2>
          <div>
            <table>
              <tr>
                <td>
                
                    <% @taxiTable.each do |taxi| %>
                      <%=h taxi[0] %>
                    <% end %>
                  
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </div>
    <script>
      $('.check').click(function() {
          $($(this).parent().prev()).toggleClass("displayreply");
      });
    </script>
    <script src="js/admin_nav.js"></script>
  </div>
</body>
</html>
